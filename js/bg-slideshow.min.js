(function(b){b.bgSlideshow=function(q){function ha(a){a=a.split("//").join("/");a!=="/"?(a=a.split("/"),a.length===3?(d=parseInt(a[2],10)-1,j=a[1]):isNaN(a[1])?(d=0,j=a[1]):(d=parseInt(a[1],10)-1,j="")):(j="/",d=0)}function aa(){var a;e=0;if(j!=="/")for(a=k;a--;)if(ba[a]==j){e=a;break}for(a=k;a--;)a!==e?(u[a].css("display","none"),l[a].css({opacity:Aa,cursor:"pointer"})):(l[e].css({opacity:1,cursor:"default"}),ia?ia=!1:E&&u[e].fadeIn(500));F&&F.fadeIn(300);if(ja!==e){E=!0;g=ka[e];n=g.length;v=n-1; w=[];m=[];G=[];d>v&&(d=0);for(var c=0;c<n;c++)g[c].html()!==""?(g[c].data("id",c),m[c]=g[c],o=!0):(g[c].css("display","none"),E=o=!1),g[c].attr("title")?(g[c].data("url",g[c].attr("title")),G[c]=g[c].attr("title"),g[c].removeAttr("title")):G[c]=g[c].data("url");n>1?(E?u[e].css("display","block"):u[e].css("display","none"),ca&&(H&&b("#play-pause").css("display","block"),I&&b(".prev-next").css("display","block"),ca=!1)):(u[e].css("display","none"),H&&b("#play-pause").css("display","none"),I&&b(".prev-next").css("display", "none"),ca=!0);if(Ba){a=[];for(c=0;c<n;c++)a[c]=G[c];for(;a.length>0;)c=Math.floor(Math.random()*a.length),w[w.length]=a[c],a.splice(c,1)}else w=G;R=l[e].data("stretch");la=l[e].data("center")}if(E)for(a=n;a--;)a!==d?g[a].css({cursor:"pointer",opacity:1}):g[a].css({cursor:"default",opacity:S});Ca?ma(w[d]+"?img="+(new Date).getTime().toString()):ma(w[d]);ja=e}function x(){J=!0;y=!1;for(var a=k;a--;)l[a].unbind("click",na);if(o)for(a=n;a--;)m[a].unbind("click",oa);I&&(da.unbind("click",pa),ea.unbind("click", qa))}function ma(a){T=!0;r===0?(ra.prepend(z),z.css("z-index",parseInt(A.css("z-index"),10)+1),h=b("<img />").css({display:"none",position:"fixed"}).one("load",U),h.appendTo(z),h.attr("src",a)):(ra.prepend(A),A.css("z-index",parseInt(z.css("z-index"),10)+1),i=b("<img />").css({display:"none",position:"fixed"}).one("load",U),i.appendTo(A),i.attr("src",a))}function U(){T=!1;r===0?(K=h.width(),L=h.height(),r=1):(K=i.width(),L=i.height(),r=0);F&&F.fadeOut(300);sa();V=!0;R||fa();r===1?h.fadeIn(ta,ua): i.fadeIn(ta,ua)}function fa(){r===1?i&&(i.remove(),A.detach()):h&&(h.remove(),z.detach())}function ua(){V=!1;R&&fa();f&&clearTimeout(f);for(var a=k;a--;)a!==e&&l[a].click(na);if(n>1){if(o)for(a=n;a--;)a!==d&&m[a].click(oa);I&&(da.click(pa),ea.click(qa));ga?B?f=setTimeout(va,Da):y=!0:y=!0}else y=!0;J=!1}function va(){x();o?(m[d].css({cursor:"pointer",opacity:1}),d<v?d++:d=0,m[d].css({cursor:"default",opacity:S})):d<v?d++:d=0;b.address.value(j.split("/").join("")+"/"+(d+1).toString())}function na(){J|| b.address.value(ba[b(this).data("id")])}function oa(){J||(f&&clearTimeout(f),x(),b.address.value(j.split("/").join("")+"/"+(parseInt(b(this).data("id"),10)+1).toString()))}function pa(){f&&clearTimeout(f);x();o&&m[d].css({cursor:"pointer",opacity:1});d>0?d--:d=v;o&&m[d].css({cursor:"default",opacity:S});b.address.value(j.split("/").join("")+"/"+(d+1).toString())}function qa(){f&&clearTimeout(f);x();o&&m[d].css({cursor:"pointer",opacity:1});d<v?d++:d=0;o&&m[d].css({cursor:"default",opacity:S});b.address.value(j.split("/").join("")+ "/"+(d+1).toString())}function wa(){B?(f&&clearTimeout(f),M.css("display","none"),N.css("display","block"),B=!1,J||(y=!0)):(N.css("display","none"),M.css("display","block"),B=!0,y&&va())}function sa(a){s=O.width();t=O.height();if(typeof h!=="undefined"){typeof a==="object"&&V&&(V=!1,h.stop(!0,!0),i&&i.stop(!0,!0));var a=s/K,c=t/L,b,d;R?(c=a>c?a:c,a=Math.ceil(K*c),c=Math.ceil(L*c),la?(a>s?b=a-s>>1:b=0,c>t?d=c-t>>1:d=0):d=b=0):(c=a>c?c:a,a=Math.ceil(K*c),c=Math.ceil(L*c),s>a?b=-(s-a>>1):b=0,t>c?d=-(t- c>>1):d=0);r===1?h&&h.width(a).height(c).css({top:-d,left:-b}):i&&i.width(a).height(c).css({top:-d,left:-b})}}var p=b(document);if(p.find("#bg-images").length!==0){var ga=q.autoPlay,Da=q.transitionDelay,S=q.activeNumOpacity,Aa=q.nonActiveCatOpacity,Ba=q.randomizeImages,N,M,da,ea,B,v,n,f,P,K,L,s,t,h,i,w,j,F,m,g,G,la,R,I,o,H,E,ja,d,r=0,k=0,e=0,ta=750,J=!1,y=!1,T=!1,ca=!1,V=!1,ia=!0,xa=!0,O=b(window),ra=b("body"),ya=b("#bg-images"),z=b("<div />"),A=b("<div />"),W=ya.find("ul"),ka=[],l=[],ba=[],u=[], Ca=navigator.userAgent.toLowerCase().indexOf("chrome")===-1?!1:!0;q.disableRightClick&&p.bind("contextmenu",function(a){a.preventDefault()});p.find("#preloader").length>0&&(F=b("#preloader"));ga?B=!0:B=!1;if(W.length>0){var Q,X,Y,za=b("#categories"),Z,C,D,$;W.each(function(){X=[];Y=0;b(this).children("li").each(function(){X[Y]=b(this);Y++});b(this).attr("class")?(Z=b(this).attr("class"),Z==="stretch"?(C=!0,D=!1):D=Z==="stretch-center"?C=!0:C=!1):(C=!0,D=!1);$=b(this).attr("title");b(this).removeAttr("title"); ba[k]=$.toLowerCase().split(" ").join("_");Q=b("<p />");Q.html($).data({id:k,stretch:C,center:D});za.append(Q);u[k]=b(this);l[k]=Q;ka[k]=X;k++});W.length===1&&l[0].css("visibility","hidden");W=q=$=D=C=Z=Y=za=Q=X=null;(p.find("#music").length===0||p.find(".volume").length===0)&&l[0].css("margin-left",parseInt(l[0].css("margin-left"),10)<<1);p.find(".play-button").length>0&&p.find(".pause-button").length>0?(N=b(".play-button"),M=b(".pause-button"),N.click(wa),M.click(wa),ga?N.css("display","none"): M.css("display","none"),H=!0):H=!1;p.find(".prev-button").length>0&&p.find(".next-button").length>0?(da=b(".prev-button"),ea=b(".next-button"),I=!0):H=!1;ya.css("display","block");z.css({position:"fixed",zIndex:-1E4});A.css({position:"fixed",zIndex:-1E4});s=O.width();t=O.height();b.address.internalChange(function(a){f&&clearTimeout(f);P&&clearTimeout(P);x();ha(a.value);aa()});b.address.externalChange(function(a){f&&clearTimeout(f);P&&clearTimeout(P);T&&(h&&h.unbind("load",U),i&&i.unbind("load",U), fa(),T=!1);ha(a.value);xa?(aa(),xa=!1):(x(),P=setTimeout(aa,750))});O.resize(sa);b.bgSlideshow.getIsOn=function(){return d};b.bgSlideshow.getCatOn=function(){return e};b.bgSlideshow.getHash=function(){return j}}}}})(jQuery);